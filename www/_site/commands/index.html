<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="command line utility tool for moodle">
    <meta name="author" content="">
    <link rel="shortcut icon" href="">

    <title>moosh</title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap-yeti.css" rel="stylesheet">

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px;
      }
      .fa-times {
	color: #FF4136;
      }
      .fa-check {
	color: #2ECC40;
      }

      a[name] + h2 {
        padding-top: 4rem; // Prevent navbar hiding heading when linking to a #command-name
      }

      .bs-sidebar {
        position: static;
      }

      @media (min-width: 769px) {
        img.book.above-index {
          max-height: calc(100vh - 50rem);
        }

        .bs-sidebar {
          position: fixed;
          max-width: 25%;
        }
      }
    </style>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">moosh</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="https://github.com/tmuras/moosh">github</a></li>
            <li><a href="/faq">FAQ</a></li>
            <li><a href="/commands">commands</a></li>
            <li><a href="/dev">dev</a></li>
            <li><a href="/tutorials">tutorials</a></li>
          </ul>
          <a href="https://github.com/tmuras/moosh"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">

    <!-- <div class="container"> -->

      <div class="row row-offcanvas row-offcanvas-right">


          <div class="col-xs-12 col-sm-9">
          <!--<div class="">-->
            <a name="Commands"></a>
<h1>Commands</h1>

<a name="activity-add"></a>
<h2>activity-add</h2>

<p>Adds an activity instance to the specified course. The activity is specified by it's component name
without the plugin type prefix, so "forum", "assign" or "data" for example, and the course is specified
by it's id.
Usually you will want to use "-n, --name=" option to set the name of the activity.</p>

<p>See <a href="https://moodle.org/mod/forum/discuss.php?d=368091">Moodle forum post</a> about using the options.</p>

<p>Example 1. Add new assignment activity to course with id 2.</p>

<pre><code>moosh activity-add assign 2
</code></pre>

<p>Example 2. Add forum to section 3 of course 4.</p>

<pre><code>moosh activity-add --section 3 forum 4
</code></pre>

<p>Example 3. Add lesson named "The first lesson" to course 2.</p>

<pre><code>moosh activity-add --name "The first lesson" lesson 2
</code></pre>

<p>Example 4. Add assignment with name "Easy assignment" and idnumber "ASD123" to course 2.</p>

<pre><code>moosh activity-add --name "Easy assignment" --section 2 --idnumber "ASD123" assign 2
</code></pre>

<p>Example 5. Add quiz "more emails" with intro set to "polite orders", network address restriction set to 192.168.2.2 to course 33.</p>

<pre><code>moosh activity-add -n 'more emails' -o "--intro=polite orders. --subnet=192.168.2.2" quiz 33
</code></pre>

<p>Example 6. Add scorm "scorm1" with description "my intro ABC" and forcenewattempt set to yes to course 2.</p>

<pre><code>moosh activity-add -n scorm1 -o '--intro=my intro ABC --forcenewattempt=1' scorm 2    
</code></pre>

<p>Example 7. Add quiz named "moosh test quiz" with intro set to "Here is your quiz", and activity completion options enabled to course 33</p>

<pre><code>moosh activity-add -n 'moosh test quiz' -o="--intro=Here is your quiz.  --completion=2 --completionview=1 --completionusegrade=1 --completionpass=1" quiz 33
</code></pre>

<p>Example 8. Add page "my page" to course id 8, with page content that contains newline.</p>

<pre><code>moosh activity-add -n 'my page' -o '--intro=my introduction --content=fist line
second line' page 8
</code></pre>

<a name="activity-delete"></a>
<h2>activity-delete</h2>

<p>Deletes activity with given module id.</p>

<pre><code>moosh activity-delete 2
</code></pre>

<a name="activity-config-set"></a>
<h2>activity-config-set</h2>

<p>Follows the course-config-set pattern, updating a field in the Moodle {$module} table, (NOT {course_modules} table!), for a single activity of a given module type, or for all activities of that type (or only those in one section (optional)) in a course.</p>

<p>Example 1: set the name of a single URL resource with instance(!) id=151</p>

<pre><code>moosh activity-config-set activity 151 url name "Examinee handbook"
</code></pre>

<p>Example 2: set introformat to markdown in all forums in a course with id=41</p>

<pre><code>moosh activity-config-set course 41 forum introformat 4
</code></pre>

<p>Example 3: set reviewrightanswer to "After quiz closes" for quizzes in section number 2 in a course with id=45</p>

<pre><code>moosh activity-config-set -s 2 course 45 quiz reviewrightanswer 65552
</code></pre>

<a name="activity-move"></a>
<h2>activity-move</h2>

<p>Moves activity with module id in the first argument to the end of its present section (if alone), to the end of the section in the --section number (not id) option (if given), and before the activity with the module id in the second, optional argument (which is not respected if it conflicts with the section number option).</p>

<pre><code>moosh activity-move -s 2 4576 4578
</code></pre>

<a name="admin-login"></a>
<h2>admin-login</h2>

<p>Create a session (login) for admin user. Command returns session cookie name &amp; value.</p>

<pre><code>moosh admin-login
</code></pre>

<a name="apache-parse-extendedlog"></a>
<h2>apache-parse-extendedlog</h2>

<p>Parse Apache log that was configured to capture extra Moodle &amp; timings information. To configure it for your Apache server:</p>

<ol>
<li><p>Add new LogFormat to apache2.conf:</p>

<p> LogFormat "H: %v U: %{MOODLEUSER}n T: %Ts / %DÂµs | %{X-Forwarded-For}i %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" moodle_log</p></li>
<li><p>Add new log in your virtual host configuration:</p>

<p> CustomLog ${APACHE_LOG_DIR}/moodle.log moodle_log</p></li>
</ol>


<p>You can then parse resulting moodle.log file with moosh:</p>

<pre><code>moosh apache-parse-extendedlog /var/log/apache2/moodle.log
</code></pre>

<a name="apache-parse-missing-files"></a>
<h2>apache-parse-missing-files</h2>

<p>Looks through apache access log for potentially missing files.</p>

<p>Example 1. Parse file <code>apache.log</code> and search for missing files.</p>

<pre><code>moosh apache-parse-missing-files apache.log
</code></pre>

<a name="apache-parse-perflog"></a>
<h2>apache-parse-perflog</h2>

<p>Parse log file, and construct query with performance log.</p>

<p>Example 1.</p>

<pre><code>moosh apache-parse-perflog apache.log
</code></pre>

<p>Sample line generated (INSERT):</p>

<pre><code>INSERT IGNORE INTO perflog (time,timestamp,url,memory_peak,includecount,langcountgetstring,db_reads,db_writes,db_queries_time,ticks,user,sys,cuser,csys,serverload,cache_mondodb_hits,cache_mondodb_misses,cache_mondodb_sets,cache_static_hits,cache_static_misses,cache_static_sets,cache_staticpersist_hits,cache_staticpersist_misses,cache_staticpersist_sets,cache_file_hits,cache_file_misses,cache_file_sets,cache_memcached_hits,cache_memcached_misses,cache_memcached_sets,cache_memcache_hits,cache_memcache_misses,cache_memcache_sets,cache_redis_hits,cache_redis_misses,cache_redis_sets,script,query,type) VALUES ('2478271','2016-07-26 10:21:30','/course/view.php?id=139&amp;section=4','16427592','1465','1586','1314','1','1041750','248','58','12','0','0','14','0','0','0','1819','17','27','0','0','0','0','2','0','73','161','163','0','0','0','0','0','0','/course/view.php','id=139&amp;section=4','script')
</code></pre>

<p>The DB table structure for the INSERTs generated:</p>

<pre><code>
CREATE TABLE perflog (
 id bigint(20) unsigned NOT NULL AUTO_INCREMENT,
 timestamp datetime NOT NULL,
 time int(10) unsigned NOT NULL,
 url varchar(255) NOT NULL,
 memory_peak int(10) unsigned NOT NULL,
 includecount int(10) unsigned NOT NULL,
 contextswithfilters int(10) unsigned NOT NULL,
 filterscreated int(10) unsigned NOT NULL,
 textsfiltered int(10) unsigned NOT NULL,
 stringsfiltered int(10) unsigned NOT NULL,
 langcountgetstring int(10) unsigned NOT NULL,
 db_reads int(10) unsigned NOT NULL,
 db_writes int(10) unsigned NOT NULL,
 db_queries_time int(10) unsigned NOT NULL,
 ticks int(10) unsigned NOT NULL,
 user int(10) unsigned NOT NULL,
 sys int(10) unsigned NOT NULL,
 cuser int(10) unsigned NOT NULL,
 csys int(10) unsigned NOT NULL,
 serverload int(10) unsigned NOT NULL,
 cache_mondodb_sets int(10) unsigned NOT NULL,
 cache_mondodb_misses int(10) unsigned NOT NULL,
 cache_mondodb_hits int(10) unsigned NOT NULL,
 cache_static_sets int(10) unsigned NOT NULL,
 cache_static_misses int(10) unsigned NOT NULL,
 cache_static_hits int(10) unsigned NOT NULL,
 cache_staticpersist_sets int(10) unsigned NOT NULL,
 cache_staticpersist_misses int(10) unsigned NOT NULL,
 cache_staticpersist_hits int(10) unsigned NOT NULL,
 cache_file_sets int(10) unsigned NOT NULL,
 cache_file_misses int(10) unsigned NOT NULL,
 cache_file_hits int(10) unsigned NOT NULL,
 cache_memcache_sets int(10) unsigned NOT NULL,
 cache_memcache_misses int(10) unsigned NOT NULL,
 cache_memcache_hits int(10) unsigned NOT NULL,
 cache_memcached_sets int(10) unsigned NOT NULL,
 cache_memcached_misses int(10) unsigned NOT NULL,
 cache_memcached_hits int(10) unsigned NOT NULL,
 cache_redis_sets int(10) unsigned NOT NULL,
 cache_redis_misses int(10) unsigned NOT NULL,
 cache_redis_hits int(10) unsigned NOT NULL,
 query varchar(255) NULL,
 script varchar(255) NULL,
 path varchar(255) NULL,
 type varchar(255) NULL,
 PRIMARY KEY (id),
 UNIQUE KEY uniquerow (timestamp,time,url)
);
</code></pre>


<a name="audit-passwords"></a>
<h2>audit-passwords</h2>

<p>Audit hashed passwords - check if any one matches top 10 000 known passwords. With -r also show password matched.
 -u <userid> will check only user with given id.</p>

<p>Example 1. Check all users for easily crackable passwords and show them.</p>

<pre><code>moosh audit-passwords -r
</code></pre>

<p>Example 2. Check if user with id 17 has a weak password.</p>

<pre><code>moosh audit-passwords -u 17
</code></pre>

<a name="auth-list"></a>
<h2>auth-list</h2>

<p>List authentication plugins.</p>

<p>Example 1. List enabled authentication plugins.</p>

<pre><code>moosh auth-list
</code></pre>

<a name="auth-manage"></a>
<h2>auth-manage</h2>

<p>Allows to manage auth plugins. Disable, enable, moving up and down in order.</p>

<p>Example 1. Disable External database (db) auth plugin.</p>

<pre><code>moosh auth-manage disable db
</code></pre>

<p>Example 2. Move up Email-based self-registration (email).</p>

<pre><code>moosh auth-manage up email 
</code></pre>

<a name="backup-info"></a>
<h2>backup-info</h2>

<p>Provides some basic information about Moodle backup file.
The command works by extracting files like users.xml, gradebook.xml, course/logs.xml and getting the information from them</p>

<p>Example 1. Display basic stats about backup-moodle2-course-2-course1-20200405-1947.mbz file.</p>

<pre><code>moosh backup-info backup-moodle2-course-2-course1-20200405-1947.mbz
</code></pre>

<a name="badge-delete"></a>
<h2>badge-delete</h2>

<p>Deletes badges by <strong>criteria</strong></p>

<p><strong>criteria</strong> - a string with SQL fragment that selects the records from mdl_bagdes table. The same idea as with <code>moosh user-list</code> command.</p>

<p>Example 1: Show all badges without deleting.</p>

<pre><code>moosh badge-delete --no-action "1 = 1"
</code></pre>

<p>Example 2: Delete badge WHERE id = 1.</p>

<pre><code>moosh badge-delete "id = 4"
</code></pre>

<p>Example 3: Delete all badges WHERE courseid = 433 and status = 0.</p>

<pre><code>moosh badge-delete "courseid=433 AND status=0"
</code></pre>

<p>Example 4: Delete all badges with timecreated = 1617009565 without the badge with the lowest ID.</p>

<pre><code>moosh badge-delete -n --keepfirst 'timecreated=1617009565'
</code></pre>

<a name="badge-delete-duplicates"></a>
<h2>badge-delete-duplicates</h2>

<p>This command detects badge duplicates (with the same timecreated and courseid) and removes them.</p>

<p>It will keep only one (with the lowest ID) duplicate which has the same timecreated and courseid.</p>

<pre><code>moosh badge-delete-duplicates [-n, --no-action]
</code></pre>

<p>Example 1: Just show all duplicates.</p>

<pre><code>moosh badge-delete-duplicates --no-action
</code></pre>

<p>Example 2: Delete all duplicates.</p>

<pre><code>moosh badge-delete-duplicates
</code></pre>

<a name="base-path"></a>
<h2>base-path</h2>

<p>For a given path/file inside Moodle plugin, the command returns initial directories that are a base directory for that plugin.
The path can be provided as a single argument or read from standard input.</p>

<p>Example 1. Displays mod/choice.</p>

<pre><code>moosh base-path mod/choice/index.php
</code></pre>

<p>Example 2. Displays theme/boost.</p>

<pre><code>moosh base-path theme/boost/pix/mod/quiz/whitecircle.png
</code></pre>

<p>Example 3. Like above but using stdin.</p>

<pre><code>echo theme/boost/pix/mod/quiz/whitecircle.png | moosh base-path
</code></pre>

<a name="block-add"></a>
<h2>block-add</h2>

<p>Add a new block instance to any system context (front page, category, course, module ...)
Can add a block instance to a single course or to all courses in a category
Can add a block to the category itself which will appear in all it's sub categories and courses
(use "moosh block-add -h" for more help)</p>

<p>Example:</p>

<pre><code>moosh block-add category 2 calendar_month admin-course-category side-pre -1
moosh block-add -s category 2 calendar_month admin-course-category side-pre -1
moosh block-add categorycourses 2 calendar_month course-view-* side-post 0
moosh block-add course 32 calendar_month course-view-* side-post 0
</code></pre>

<a name="block-manage"></a>
<h2>block-manage</h2>

<p>Show or Hide blocks, system wide (Will also delete, in the future)</p>

<p>Example:</p>

<pre><code>moosh block-manage hide calendar
moosh block-manage show calendar
</code></pre>

<a name="cache-add-redis-store"></a>
<h2>cache-add-redis-store</h2>

<p>Adds a new redis store instance to cache like in
<code>Dashboard &gt; Site administration &gt; Plugins &gt; Caching &gt; Configuration &gt; Redis &gt; Add instance</code></p>

<p>Example 1: Add new instance "Test" with server set to "localhost"</p>

<pre><code>moosh cache-add-redis-store "Test" "localhost"
</code></pre>

<p>Example 2: Add new instance "Test2" with server set to "localhost", password set to "123456" and key prefix set to "key_"</p>

<pre><code>moosh cache-add-redis-store --password "123456" -k "key_" "Test2" "localhost"
</code></pre>

<a name="cache-add-mem-store"></a>
<h2>cache-add-mem-store</h2>

<p>Adds a new mem  store instance to cache.</p>

<p>Example 1: Add new instance "Test" with server set to "localhost".</p>

<pre><code>moosh cache-add-mem-store "Test" "localhost"
</code></pre>

<p>Example 2: Add new instance "Test2" with multiple servers</p>

<pre><code>moosh cache-add-mem-store "Test2" "192.168.0.1,192.168.0.2"
</code></pre>

<p>Example 3: Add new instance "Test3" with server set to "localhost", password set to "123456" and key prefix set to "key_"</p>

<pre><code>moosh cache-add-mem-store --password "123456" -k "key_" "Test3" "localhost"
</code></pre>

<p>Example 4: Add new instance "Test4" with server set to "localhost", with serialiser and compression enabled and password set to "12345"</p>

<pre><code>moosh cache-add-mem-store --compression "1" --serialiser "1" --password "12345" "Test4" "localhost"
</code></pre>

<p>Example 5: Add new instance "Test5" with server set to "localhost", with hash set to "md5" and password set to "12345"</p>

<pre><code>moosh cache-add-mem-store --hash "md5" --password "12345" "Test5" "localhost"
</code></pre>

<a name="cache-clear"></a>
<h2>cache-clear</h2>

<p>The same as "purge all caches" page.</p>

<pre><code>moosh cache-clear
</code></pre>

<a name="cache-config-get"></a>
<h2>cache-config-get</h2>

<p>Gets cache config and print_r() it. You can find cache configuration in
<code>Dashboard &gt; Site administration &gt; Plugins &gt; Caching &gt; Configuration</code></p>

<p>Example 1: Show every cache config</p>

<pre><code>moosh cache-config-get --all
</code></pre>

<p>Example 2: Show all of the configured stores</p>

<pre><code>moosh cache-config-get --stores
</code></pre>

<p>Example 3: Show all the known definitions and definition mappings</p>

<pre><code>moosh cache-config-get -dD
</code></pre>

<a name="cache-course-rebuild"></a>
<h2>cache-course-rebuild</h2>

<p>Rebuild course cache.</p>

<p>Example 1: Rebuild cache for course with id 2</p>

<pre><code>moosh cache-course-rebuild 2
</code></pre>

<p>Example 2: Rebuild cache for all the courses.</p>

<pre><code>moosh cache-course-rebuild -a
</code></pre>

<a name="cache-edit-mappings"></a>
<h2>cache-edit-mappings</h2>

<p>Edits default mode mappings like in <code>Dashboard &gt; Site administration &gt; Plugins &gt; Caching &gt; Configuration &gt; Edit mappings</code></p>

<p>Example 1: Show default mode mappings without changing</p>

<pre><code>moosh cache-edit-mappings
</code></pre>

<p>Example 2: Set MODE_APPLICATION to "new"</p>

<pre><code>moosh cache-edit-mappings --application new
</code></pre>

<p>Example 3: Set Application to "store name", Session to "Tests" and Request to "default_request"</p>

<pre><code>moosh cache-edit-mappings -a "store name" -s Tests -r default_request
</code></pre>

<a name="cache-set"></a>
<h2>cache-set</h2>

<p>Enable to attribute cache to specific cache definition</p>

<p>Requires cache definition and cache store</p>

<p>Example 1: Set "redisstore" to "core/calendar"_subscriptions definition</p>

<pre><code>moosh cache-set core/calendar_subscriptions redisstore
</code></pre>

<a name="cache-store-clear"></a>
<h2>cache-store-clear</h2>

<p>Clear a specific cache store or only a definition for the given cache store</p>

<p>Requires cache store name</p>

<p>Option:
* --definition, -d : cache definition name</p>

<p>Example 1 : Clear redisstore cache store</p>

<pre><code>moosh cache-store-clear --defintion=calendar_subscriptions redisstore
</code></pre>

<p>Example 2 : Clear cache definition core/calendar_subscriptions for store named redisstore</p>

<pre><code>moosh cache-store-clear --definition=core/calendar_subscriptions redisstore
</code></pre>

<a name="category-config-set"></a>
<h2>category-config-set</h2>

<p>Set category configuration. Arguments are: categoryid setting value. The setting should match one of the columns from mdl_course_categories table.</p>

<p>Example 1. Set ID for category 1 to "id17".</p>

<pre><code>moosh category-config-set 1 idnumber id17
</code></pre>

<p>Example 2. Set description of category id 1 to "My Description".</p>

<pre><code>moosh category-config-set 1 description "My Description" 
</code></pre>

<a name="category-create"></a>
<h2>category-create</h2>

<p>Create new category.</p>

<p>Example 1: Add new top level category "mycat", invisible with no description.</p>

<pre><code>moosh category-create mycat
</code></pre>

<p>Example 2: Add category "mycat" under category id 6, set to visible and description to "My category".</p>

<pre><code>moosh category-create -p 6 -v 1 -d "My category" mycat
</code></pre>

<p>Example 3: Create category only once. The second run of the command with "-r" will return the ID of the existing, matching category. The same category is defined as one having the same name, idnumber, parent and description. Also there must be exactly 1 match.</p>

<pre><code>moosh category-create -r CategoryABC
moosh category-create -r CategoryABC
</code></pre>

<a name="category-delete"></a>
<h2>category-delete</h2>

<p>Delete category, all sub-categories and all courses inside.</p>

<p>Example 1: Delete recursively category with id=2</p>

<pre><code>moosh category-delete 2
</code></pre>

<a name="category-export"></a>
<h2>category-export</h2>

<p>Export category structure to XML starting from given category ID. Give 0 to export all categories.</p>

<p>Example 1: Export all categories to XML.</p>

<pre><code>moosh category-export 0
</code></pre>

<p>Example 2: Export category with id 3 and all its sub categories.</p>

<pre><code>moosh category-export 3
</code></pre>

<a name="category-import"></a>
<h2>category-import</h2>

<p>Imports category structure from XML.</p>

<p>Example 1: Import all categories from XML.</p>

<pre><code>moosh category-import categor-to-import.xml
</code></pre>

<a name="category-list"></a>
<h2>category-list</h2>

<p>List all categories or those that match search string(s).</p>

<p>Example 1: List all categories</p>

<pre><code>moosh category-list
</code></pre>

<p>Example 2: List all categories with name "test" OR "foobar"</p>

<pre><code>moosh category-list test foobar
</code></pre>

<a name="category-move"></a>
<h2>category-move</h2>

<p>Move one category to another category</p>

<p>Example 1: Move the category with id 5 to be in the category with id 7</p>

<pre><code>moosh category-move 5 7
</code></pre>

<p>Example 2: Make the category with id 3 a top-level category</p>

<pre><code>moosh category-move 3 0
</code></pre>

<a name="category-move-courses-from-category-to-another"></a>
<h2>category-move-courses-from-category-to-another</h2>

<p>Move all courses included into a source category into a destination category</p>

<p>Requires Source course category id and Destination course category id</p>

<p>Example 1: Move all courses included into category with id 1 to category with id 2</p>

<pre><code>moosh category-move-courses-from-category-to-another 1 2
</code></pre>

<a name="category-resortcourses"></a>
<h2>category-resortcourses</h2>

<p>Sort courses and/or categories by fullname, shortname or idnumber.</p>

<p>Example 1: Sort courses in category id 1 by idnumber.</p>

<pre><code>moosh category-resortcourses 1 idnumber
</code></pre>

<p>Example 2: Sort courses and categories by shortname in category id 1 and all sub-categories below.</p>

<pre><code>moosh category-resortcourses -r 1 shortname
</code></pre>

<p>Example 3: Sort courses by fullname in category id 1 and all sub-categories below. Do not change the ordering of categories.</p>

<pre><code>moosh category-resortcourses -n -r 1 fullname
</code></pre>

<a name="chkdatadir"></a>
<h2>chkdatadir</h2>

<p>Check if every file and directory in Moodle data is writeable for the user that runs the command.
You usually want to run the check as the same user that runs web server.</p>

<p>Example:</p>

<pre><code>sudo -u www-data moosh chkdatadir
</code></pre>

<a name="code-check"></a>
<h2>code-check</h2>

<p>Run Moodle code checker against the files.</p>

<p>Example 1:</p>

<pre><code>moosh code-check -p some/path/to/file.php
</code></pre>

<p>Example 2:</p>

<pre><code>moosh code-check -p some/path/to/dir
</code></pre>

<a name="cohort-create"></a>
<h2>cohort-create</h2>

<p>Create new cohort.</p>

<p>Example 1: Create two system cohorts "mycohort1" and "mycohort2".</p>

<pre><code>moosh cohort-create mycohort1 mycohort2
</code></pre>

<p>Example 2: Create cohort "my cohort18" with id "cohort18" under category id 2, with description "Long description".</p>

<pre><code>moosh cohort-create -d "Long description" -i cohort18 -c 2 "my cohort18"
</code></pre>

<a name="cohort-delete"></a>
<h2>cohort-delete</h2>

<p>Delete one or more cohorts</p>

<p>Requires cohort ids to delete separated by ,</p>

<p>Example 1: Delete cohort of id 42</p>

<pre><code>moosh cohort-cohort-delete 42
</code></pre>

<p>Example 2: Delete cohorts of ids 42 and 2012</p>

<pre><code>moosh cohort-cohort-delete 42,2012
</code></pre>

<a name="cohort-enrol"></a>
<h2>cohort-enrol</h2>

<p>Add user to cohort or enroll cohort to a course.</p>

<p>Example 1: Add user id 17 to cohort named "my cohort18"</p>

<pre><code>moosh cohort-enrol -u 17 "my cohort18"
</code></pre>

<p>Example 2: Enroll cohort "my cohort18" to course id 4.</p>

<pre><code>moosh cohort-enrol -c 4 "my cohort18"
</code></pre>

<a name="cohort-enrolfile"></a>
<h2>cohort-enrolfile</h2>

<p>Add users to cohorts from a CSV file. The vaild fields for the CSV file include: username,
email, cohortid, cohortname</p>

<p>The CSV must include at least one of username/email and one of cohortid/cohortname. If
more than one of either category is given, username and cohortid take precedence over the
other values</p>

<p>Example 1: Add users to specified cohorts from /home/me/testing.csv. If the contents of
testing.csv are</p>

<pre><code>username,cohortid
johndoe,1
janedoe,2
</code></pre>

<p>then user johndoe is enrolled in cohort id 1, and user janedoe is enrolled in cohort with
id 2 by:</p>

<pre><code>moosh cohort-enrolfile /home/me/testing.csv
</code></pre>

<a name="cohort-unenrol"></a>
<h2>cohort-unenrol</h2>

<p>Remove user(s) from a cohort (by cohort id)</p>

<p>Example 1: Remove users 20,30,40 from cohort id=7.</p>

<pre><code>moosh cohort-unenrol 7 20 30 40
</code></pre>

<a name="config-get"></a>
<h2>config-get</h2>

<p>Get config variable from config or config_plugins table. The syntax is based on get_config($plugin,$name) API function. Both arguments are optional.</p>

<p>Example 1: Show all core config variables.</p>

<pre><code>moosh config-get
</code></pre>

<p>Example 2: Show all config variables for "user"</p>

<pre><code>moosh config-get user
</code></pre>

<p>Example 3: Show core setting "dirroot"</p>

<pre><code>moosh config-get core dirroot
</code></pre>

<a name="config-plugin-export"></a>
<h2>config-plugin-export</h2>

<p>Exports whole configuration of selected plugin to .xml</p>

<p>Example 1: Export mod_book plugin configuration to Book_config_{timestamp}.xml in current directory.</p>

<pre><code>moosh config-plugin-export book
</code></pre>

<p>Example 2: Export mod_book plugin configuration to /tmp/plugin/Book_config_{timestamp}.xml</p>

<pre><code>moosh config-plugin-export -o /tmp/plugin/ mod_book
</code></pre>

<a name="config-plugin-import"></a>
<h2>config-plugin-import</h2>

<p>Imports configuration of plugin from .xml created by <strong>config-plugin-export</strong></p>

<p>Example 1: Import configuration of plugin mod_book into moodle.</p>

<pre><code>moosh config-plugin-import /tmp/Book_config_1608106580.xml
</code></pre>

<p>To see changes in Moodle you need to execute <code>moosh cache-clear</code></p>

<a name="config-plugins"></a>
<h2>config-plugins</h2>

<p>Shows all plugins that have at least one entry in the config_plugins table. Optionally provide an argument to match plugin name.</p>

<p>Example 1: Show all plugins from config_plugins table.</p>

<pre><code>moosh config-plugins
</code></pre>

<p>Example 2: Show all themes that have some settings.</p>

<pre><code>moosh config-plugins theme_
</code></pre>

<a name="config-set"></a>
<h2>config-set</h2>

<p>Set config variable. The syntax of the command is based on the set_config() Moodle API:</p>

<pre><code>moosh config-set name value &lt;plugin&gt;
</code></pre>

<p>If third argument (plugin) is not provided then the variable is set in the core Moodle configuration table.</p>

<p>Example 1: Enable debug.</p>

<pre><code>moosh config-set debug 32767
</code></pre>

<p>Example 2: Set URL to logo for Sky High theme.</p>

<pre><code>moosh config-set logo http://example.com/logo.png theme_sky_high
</code></pre>

<a name="context-freeze"></a>
<h2>context-freeze</h2>

<p>Freeze or unfreeze a given context</p>

<p>Requires instance id, context level and lock</p>

<p>Lock is 1 if locked, 0 if unlock</p>

<p>Example 1 : Lock course context of id 20</p>

<pre><code>moosh context-freeze 20 50 1
</code></pre>

<p>Example 1 : Unlock course context of id 20</p>

<pre><code>moosh context-freeze 20 50 0
</code></pre>

<a name="context-rebuild"></a>
<h2>context-rebuild</h2>

<p>Rebuild context paths - it does the same thing as command bellow with \context_helper::build_all_paths(true)</p>

<pre><code>php admin/tool/task/cli/schedule_task.php --execute='\core\task\context_cleanup_task' --showdebugging
</code></pre>

<p>(see https://docs.moodle.org/311/en/How_to_rebuild_context_paths)</p>

<p>Example:</p>

<pre><code>moosh context-rebuild
</code></pre>

<a name="course-backup"></a>
<h2>course-backup</h2>

<p>Backup course with provided id.  By default, logs and grade histories are excluded.</p>

<p>Example 1: Backup course id=3 into default .mbz file in current directory:</p>

<pre><code>moosh course-backup 3
</code></pre>

<p>Example 2: Backup course id=3 and save it as /tmp/mybackup.mbz:</p>

<pre><code>moosh course-backup -f /tmp/mybackup.mbz 3
</code></pre>

<p>Example 3: Backup course id=3, including logs and grade histories:</p>

<pre><code>moosh course-backup --fullbackup 3
</code></pre>

<p>Example 3: Backup course id=3 without any user data (excludes users, logs, grade historyies, role assignments, comments, and filters):</p>

<pre><code>moosh course-backup --template 3
</code></pre>

<a name="cours-change-format"></a>
<h2>cours-change-format</h2>

<p>This command will change the format of a course to another one, triggering all the necessary changes to course such like image transfert.</p>

<p>Example : For a course of id 3 that is in grid format, it will pass to tiles, migrating image for the new course format</p>

<pre><code>moosh course-change-format 3 tiles
</code></pre>

<a name="course-cleanup"></a>
<h2>course-cleanup</h2>

<p>The command will to though various pieces of HTML texts contained in the given course and run purify_html() function on them. The command does not actually do any changes -
it will only show which content could possibly be cleaned up.</p>

<p>Example 1: Check if there is any HTML to be cleaned-up in course 3:</p>

<pre><code>moosh course-cleanup 3
</code></pre>

<a name="course-config-set"></a>
<h2>course-config-set</h2>

<p>Update a field in the Moodle {course} table for a single course, or for all courses in a category.</p>

<p>Example 1: set the shortname of a single course with id=42</p>

<pre><code>moosh course-config-set course 42 shortname new_shortname
</code></pre>

<p>Example 2: set the format to topics for all courses in a category with id=7</p>

<pre><code>moosh course-config-set category 7 format topics
</code></pre>

<a name="course-create"></a>
<h2>course-create</h2>

<p>Create a new course(s).</p>

<p>Example 1: Create 10 new courses using bash/zim expansion</p>

<pre><code>moosh course-create newcourse{1..10}
</code></pre>

<p>Example 2: Create new course</p>

<pre><code>moosh course-create --category 1 --fullname "full course name" --description "course description" --idnumber "course idnumber" shortname
</code></pre>

<p>Example 3: Create new course with section format, number options</p>

<pre><code>moosh course-create --category 4 --format topics --numsections 2 test
</code></pre>

<a name="course-delete"></a>
<h2>course-delete</h2>

<p>Delete course(s) with ID(s) given as argument(s).</p>

<p>Example 1: delete courses id 2,3 and 4.</p>

<pre><code>moosh course-delete 2 3 4
</code></pre>

<a name="course-enrol"></a>
<h2>course-enrol</h2>

<p>Enrol user(s) into a course id provided. First argument is a course ID, then put one or more user names.
Use -i for providing username IDs.  Optionally add -S and -E to define start and end dates for the enrollment.</p>

<p>Example 1: Enroll username1 and username2 into course ID 21 as students.</p>

<pre><code>moosh course-enrol 21 username1 username2
</code></pre>

<p>Example 2: Enroll user with id 21 into the course with id 31 as a non-editing teacher.</p>

<pre><code>moosh course-enrol -r teacher -i 31 21
</code></pre>

<p>Example 3: Enroll username3 into course ID 21 with start date of May 1st, 2018 10AM and end date May 31st, 2018 10AM</p>

<pre><code>moosh course-enrol 21 username3 -S 2018-05-01T10:00:00 -E 2018-05-31T10:00:00
</code></pre>

<p>Example 4: Enroll username4 into course ID 21 with start date of May 1st, 2018 10AM and duration of 30 days.</p>

<pre><code>moosh course-enrol 21 username3 -S 2018-05-01T10:00:00 -E 30
</code></pre>

<a name="course-enrolbyname"></a>
<h2>course-enrolbyname</h2>

<p>Is similar to course-enrol function. But it can also be used the first- and lastname of the user and the course shortname.</p>

<p>Example 1: Enroll user with firstname test42 and lastname user42 into the course with shortname T12345 as an editing teacher.</p>

<pre><code>moosh course-enrolbyname -r editingteacher -f test42 -l user42 -c T12345
</code></pre>

<a name="course-enrol-change-status"></a>
<h2>course-enrol-change-status</h2>

<p>Requires course id</p>

<p>Options :
* --instanceid=?, -i ? : enrolment instance id, if not command enter in interactive mode and show all available enrolment instance for the given course, you'll have to choose status from prompt
* --status=0 or 1, -s 0 or 1 : status of enrolment instance 0 (default value) -> enabled, 1 -> disabled</p>

<p>Example1 : change course enrolment instance status in interactive mode</p>

<pre><code>moosh course-enrol-change-status 2
</code></pre>

<p>Example1 : change course enrolment instance status to disable for instance 42</p>

<pre><code>moosh course-enrol-change-status -i=42 -s=1 2
</code></pre>

<a name="course-enableselfenrol"></a>
<h2>course-enableselfenrol</h2>

<p>Enable self enrolment on one or more courses given a list of course IDs. By default self enrolment is enabled without an enrolment key, but one can be passed as an option.</p>

<p>Example 1: Enable self enrolment on a course without an enrolment key</p>

<pre><code>moosh course-enableselfenrol 3
</code></pre>

<p>Example 2: Enable self enrolment on a course with an enrolment key</p>

<pre><code>moosh course-enableselfenrol --key "an example enrolment key" 3
</code></pre>

<a name="course-info"></a>
<h2>course-info</h2>

<p>Shows basic information about given course ID.
This command will also clear course cache, to measure how much time the cache rebuild takes.</p>

<p>Example 1: Show statistics for course ID 2.</p>

<pre><code>moosh course-info 2  
</code></pre>

<p>Example 2: Show statistics for course ID 2 - display in CSV format.</p>

<pre><code>moosh course-info -c 2  
</code></pre>

<a name="course-last-visited"></a>
<h2>course-last-visited</h2>

<p>Shows how many hours ago any user has last visited the course.</p>

<p>Example 1: How many hours ago course ID 2 was visited.</p>

<pre><code>moosh course-last-visited 2
</code></pre>

<a name="course-list"></a>
<h2>course-list</h2>

<p>Lists courses that match your search criteria. As an argument you can provide an SQL fragment,
that is simply injected after WHERE clause when searching for courses.
All cli argument(s) will be concateneted together, so there is no need to
quote SQL into single argument. But on the other hand, you need to escape quotes, so they are not eaten by your shell.
Run command with global "-v" option to see the actual SQL used for search (<code>moosh -v course-list</code>).
There are also quite a few options that modify the behaviour - see <code>moosh course-list --help</code> for complete list.</p>

<p>Example 1: List all courses with full name containing phrase 'student'</p>

<pre><code>moosh course-list "fullname like '%student%'"
</code></pre>

<p>Example 2: List above but as separate arguments - quotes are escaped</p>

<pre><code>moosh course-list fullname like \'%student%\'
</code></pre>

<p>Example 3: List only empty courses from category 1</p>

<pre><code>moosh course-list -c 1 -e yes
</code></pre>

<a name="course-move"></a>
<h2>course-move</h2>

<p>Moves one or more courses into a given category.</p>

<p>Example 1: Move the course with ID 5 into the category with ID 2.</p>

<pre><code>moosh course-move 5 2
</code></pre>

<p>Example 2: Move courses with IDs 5, 6, 7, and 10 into the category with ID 2.</p>

<pre><code>moosh course-move 5,6,7,10 2
</code></pre>

<a name="course-reset"></a>
<h2>course-reset</h2>

<p>Reset course by ID. With -s or --settings option you can provide any supported setting for the restore. The value for
 -s option is a string with each setting in format key=value separated by space. This means you'll need to quote this
  string with double or single quotes when running the command. unenrol_users setting requires an array as a value -
  put at least one comma character (,) as a value to make moosh convert that into an array. Example:</p>

<pre><code>moosh course-reset -s "reset_forum_all=1 reset_data=0 unenrol_users=6," 17
</code></pre>

<p>Add -n or --no-action to display all reset setting that would be used on course restore. When -n is used, no action is
  actually performed.</p>

<p>All posible backup settings I've found in Moodle 2.9 are listed below. Most of them is set to eiher 0 or 1.</p>

<ul>
<li>delete_blog_associations</li>
<li>reset_assign_submissions</li>
<li>reset_chat</li>
<li>reset_choice</li>
<li>reset_comments</li>
<li>reset_completion</li>
<li>reset_data</li>
<li>reset_data_comments</li>
<li>reset_data_notenrolled</li>
<li>reset_data_ratings</li>
<li>reset_events</li>
<li>reset_forum_all</li>
<li>reset_forum_digests</li>
<li>reset_forum_ratings</li>
<li>reset_forum_subscriptions</li>
<li>reset_forum_track_prefs</li>
<li>reset_forum_types</li>
<li>reset_glossary_all</li>
<li>reset_glossary_comments</li>
<li>reset_glossary_notenrolled</li>
<li>reset_glossary_ratings</li>
<li>reset_glossary_types</li>
<li>reset_gradebook_grades</li>
<li>reset_gradebook_items</li>
<li>reset_groupings_members</li>
<li>reset_groupings_remove</li>
<li>reset_groups_members</li>
<li>reset_groups_remove</li>
<li>reset_lesson</li>
<li>reset_lesson_group_overrides</li>
<li>reset_lesson_user_overrides</li>
<li>reset_notes</li>
<li>reset_quiz_attempts</li>
<li>reset_quiz_group_overrides</li>
<li>reset_quiz_user_overrides</li>
<li>reset_roles_local</li>
<li>reset_roles_overrides</li>
<li>reset_scorm</li>
<li>reset_start_date (timestamp as a value)</li>
<li>reset_survey_analysis</li>
<li>reset_survey_answers</li>
<li>reset_wiki_comments</li>
<li>reset_wiki_tags</li>
<li>reset_workshop_assessments</li>
<li>reset_workshop_phase</li>
<li>reset_workshop_submissions</li>
<li>unenrol_users (array of user roles to unenrol)</li>
</ul>


<p>Example 1: Reset course with id=17 using default settings.</p>

<pre><code>moosh course-reset 17
</code></pre>

<p>Example 2: Show default settings  when resetting course id=17</p>

<pre><code>moosh course-reset -n 17
</code></pre>

<p>Example 3: Set unenrolment of participants with role id 5 and 6, and reset course with id=17</p>

<pre><code>moosh course-reset -s "unenrol_users=5,6" 17
</code></pre>

<a name="course-restore"></a>
<h2>course-restore</h2>

<p>Restore course from path/to/backup.mbz to category or existig course.</p>

<p>Example 1: Restore backup.mbz into category with id=1</p>

<pre><code>moosh course-restore backup.mbz 1
</code></pre>

<p>Example 2: Restore backup.mbz into existing course with id=3</p>

<pre><code>moosh course-restore -e backup.mbz 3
</code></pre>

<p>Example 3: Ignore pre-check warnings, like restoring backup from higher Moodle version.</p>

<pre><code>moosh course-restore --ignore-warnings backup.mbz 1
</code></pre>

<p>Example 4: Restore backup.mbz into existing course with id=3, overwrite course content.</p>

<pre><code>moosh course-restore --overwrite backup.mbz 3
</code></pre>

<a name="course-unenrol"></a>
<h2>course-unenrol</h2>

<p>Unerol user(s) from a course id provided. First argument is a course ID then list of users.</p>

<p>Example 1: Unenrol users with id 7, 9, 12 and 16 from course with id 2.</p>

<pre><code>moosh course-unenrol 2 7 9 12 16
</code></pre>

<a name="dashboard-reset-all"></a>
<h2>dashboard-reset-all</h2>

<p>Reset all users dashboard</p>

<p>Example 1: Reset all users dashboard</p>

<pre><code>moosh dashboard-reset-all
</code></pre>

<a name="data-stats"></a>
<h2>data-stats</h2>

<p>Provides information on size of dataroot directory, dataroot/filedir subdirectory and total size of non-external files in Moodle.
Outputs data in json format when run using --json option.</p>

<pre><code>moosh data-stats
</code></pre>

<a name="db-stats"></a>
<h2>db-stats</h2>

<p>Shows the total size of the Moodle database, the top 3 biggest tables and tables: log, grades, grades history.
With -H, -j or -e options the sizes will be shown in bytes (ie "286720" instead of "280KB").</p>

<p>Using extended option (-e) it shows all tables.</p>

<p>Example 1: Show me basic database statistics, formatted for human consumption.</p>

<pre><code>moosh db-stats
</code></pre>

<p>Example 2: Database statistics in JSON format.</p>

<pre><code>moosh db-stats -j
</code></pre>

<p>Example 3: Extended database statistics in json format. It provides statistics for each table</p>

<pre><code>moosh db-stats -e
</code></pre>

<a name="debug-off"></a>
<h2>debug-off</h2>

<p>Turns off full debug and disables theme designer mode.</p>

<pre><code>moosh debug-off
</code></pre>

<a name="debug-on"></a>
<h2>debug-on</h2>

<p>Turns on full debug - all the options in debugging section of the settings plus enables theme designer mode.</p>

<pre><code>moosh debug-on
</code></pre>

<a name="delete-missingplugins"></a>
<h2>delete-missingplugins</h2>

<p>Uninstalls all plugins that are "missing" (PLUGIN_STATUS_MISSING) - meaning there is no source code for them.
Running this command will delete database tables - destroying any data that may have been stored in plugin.</p>

<pre><code>moosh delete-missingplugins
</code></pre>

<a name="dev-langusage"></a>
<h2>dev-langusage</h2>

<p>The command parses PHP file given as an argument. If the argument points to directory,
then all the .php files inside it ae parsed.
A parser will look for the use of language strings, that is calls to get_string(), print_string(), string_for_js().
It then checks if the string is known by the string_manager - that is, if the sting is listed in the lang file.
With -l / --lang flag you may include and check against any lang file.</p>

<p>Example 1: Check if strings used in mod/book exist in the lang file.
Show only the ones missing (if any).</p>

<pre><code>moosh dev-langusage mod/book | grep missing
</code></pre>

<p>Example 2: Check if "mod_book" component strings used in mod/book are defined in the lang file.</p>

<pre><code>moosh dev-langusage -c mod_book mod/book
</code></pre>

<a name="dev-versionbump"></a>
<h2>dev-versionbump</h2>

<p>Increase the version in module's version.php.</p>

<p>Example:</p>

<pre><code>cd &lt;moodle_root&gt;/mod/&lt;your_module&gt;
moosh dev-versionbump
</code></pre>

<a name="download-moodle"></a>
<h2>download-moodle</h2>

<p>Download latest stable Moodle version (default) or another version -v is provided.</p>

<p>Example 1: Download latest Moodle</p>

<pre><code>moosh download-moodle
</code></pre>

<p>Example 2: Download latest Moodle 3.10.</p>

<pre><code>moosh download-moodle -v 3.10
</code></pre>

<p>Example 2: Download Moodle 3.5.15.</p>

<pre><code>moosh download-moodle -v 3.5.15
</code></pre>

<a name="event-fire"></a>
<h2>event-fire</h2>

<p>Fire an event. Provide event name and JSON encoded data.</p>

<pre><code>moosh event-fire report_log\\event\\report_viewed '{"contextid":1,"relateduserid":1,"other":{"groupid":1,"date":100,"modid":1,"modaction":"view","logformat":0}}' 
</code></pre>

<a name="event-list"></a>
<h2>event-list</h2>

<p>List all events available in current Moodle installation.</p>

<pre><code>moosh event-list
</code></pre>

<a name="file-check"></a>
<h2>file-check</h2>

<p>For each file entry in the database, check that the file exists in moodledata (in filedir).
With --stop <number> stop the search after number of missing files found.</p>

<p>Example:</p>

<pre><code>moosh file-check -s 1
</code></pre>

<p>Result:</p>

<pre><code>Missing /opt/data/filedir/5f/8e/5f8e911d0da441e36f47c5c46f4393269211ca56
assignfeedback_editpdf / stamps "smile.png" 2019-08-25 15:43 / 2019-08-25 15:43
Found 1 missing files, not searching anymore. Set -s 0 option to disable the limit.
</code></pre>

<a name="file-datacheck"></a>
<h2>file-datacheck</h2>

<p>Go through all files in Moodle data and check them for corruption. The check is to compare file's SHA to their file names.</p>

<pre><code>moosh file-datacheck
</code></pre>

<a name="file-dbcheck"></a>
<h2>file-dbcheck</h2>

<p>For each file in moodledata, check that there is an entry in the Moodle DB.
This command will find any extra files in "filedir".</p>

<pre><code>moosh file-dbcheck
</code></pre>

<a name="file-delete"></a>
<h2>file-delete</h2>

<p>Delete Moodle files from DB and possibly move them to trash. File IDs can be provided as arguments or on the standard input (with moosh file-delete -s).
--flush option will remove the trashcan directory.</p>

<p>Example 1: Remove files with IDs 10,20 and 30.</p>

<pre><code>moosh file-delete 10 20 30
</code></pre>

<p>Example 2: Remove all files with size greater than 100 bytes</p>

<pre><code>moosh file-list -i 'filesize&gt;1000' | moosh file-delete -s
</code></pre>

<p>Example 3: Flush trashcan</p>

<pre><code>moosh file-delete --flush
</code></pre>

<p>Example 4: Remove all automated backups and reclaim the space</p>

<pre><code>moosh file-list -i 'component="backup" AND filearea="automated"' | moosh file-delete -s
moosh file-delete --flush
</code></pre>

<a name="file-hash-delete"></a>
<h2>file-hash-delete</h2>

<p>Delete files that match given hash from the dababase (mdl_files).</p>

<p>Example:</p>

<pre><code>moosh file-hash-delete 5f8e911d0da441e36f47c5c46f4393269211ca56
</code></pre>

<p>Resuls:</p>

<pre><code>There is: 1 results of this hash. 
Successfully deleted files.
File ID: 1, contenthash: 5f8e911d0da441e36f47c5c46f4393269211ca56, itemid: 0, component: assignfeedback_editpdf, filearea: stamps, filename: smile.png
</code></pre>

<a name="file-list"></a>
<h2>file-list</h2>

<p>Search and list files from mdl_files table. The argument should be a valid SQL WHERE statement. Interesting columns of possible search criterias are:
contextid, component, filearea, itemid, filepath, filename, userid, filesize, mimetype, status, timecreated, timemodified.</p>

<p>You can also use some special values:</p>

<ul>
<li>course=NNN to list all files that relate to a course</li>
</ul>


<p>The output will contain some defaults or nearly all possible file information if "-a|--all" flag is provided. The meaning of the flags column is (in order):</p>

<ul>
<li>mdl_files.status</li>
<li>lowercase letter "d" if entry is a dicrectory</li>
<li>"e" if external file</li>
<li>"i" if a valid image</li>
<li>"m" if time created and time modified differ</li>
</ul>


<p>With "-i" option only IDs are returned. This can be used when pipe-ing into other file-related commands.</p>

<p>Use the -m option to list files that exsist on the {files} DB table but are missing from the file system,
and add -r option to remove them from the {file} DB table.</p>

<p>Example 1: Show all legacy files for a course, which context id is 15</p>

<pre><code>moosh file-list "contextid=15 AND component='course' AND filearea='legacy'"
</code></pre>

<p>Example 2: Display full information on file with ID 17</p>

<pre><code>moosh file-list -a id=162
</code></pre>

<p>Example 3: Show all files from course 6</p>

<pre><code>moosh file-list course=6
</code></pre>

<p>Example 4: Super-combo. Get all course files and tar/bzip2 them up.</p>

<pre><code>moosh file-list -i course=2 | moosh file-path -s -r | tar -C $(moosh config-get core dataroot) -T - -cjf files.tar.bz2
</code></pre>

<a name="file-path"></a>
<h2>file-path</h2>

<p>Show full or relative path in the filesystem to Moodle file(s). Files can be identified by ID or hash (auto-detected) as arguments or on stdin (-s option).</p>

<p>Example 1: Show path to a file with contenthash da39a3ee5e6b4b0d3255bfef95601890afd80709</p>

<pre><code>moosh file-path da39a3ee5e6b4b0d3255bfef95601890afd80709
</code></pre>

<p>Example 2: Show paths to files with ID bewteen 100 and 200</p>

<pre><code>moosh file-list -i 'id&gt;100 AND id&lt;200' | moosh file-path -s
</code></pre>

<p>Example 3: Like above but with no duplicates and show path relative to data root (-r)</p>

<pre><code>moosh file-list -r -i 'id&gt;100 AND id&lt;200' | moosh file-path -s | sort | uniq
</code></pre>

<a name="file-upload"></a>
<h2>file-upload</h2>

<p>Upload selected file to Moodle data. Must specify full path to filename.</p>

<ul>
<li>-c|--contextid - set context id. Defaults to 5, which is a context ID of admin user in standard installation.</li>
<li>-f|--filearea - set filearea, defaults to 'private'</li>
<li>-m|--component - component field, defaults to 'user'</li>
<li>-i|--itemid itemid column, defaults to '0'</li>
<li>-s|--sortorder sort order, '0' by default</li>
<li>-n|--filename change name of file saved to moodle, defaults to full name of the file given in argument</li>
<li>-p|--filepath change path of file saved to moodle, defaults to file full path</li>
</ul>


<p>Example 1: Upload file file.txt to private area of a user with context id 5 - usually "admin" user.</p>

<pre><code>moosh file-upload file.txt
</code></pre>

<p>Example 2: Upload to admin's private files a file file.txt, name in Moodle "myfile.txt" and
place in directory "drop".</p>

<pre><code>moosh file-upload --filepath=drop --filename=myfile.txt file.txt 
</code></pre>

<a name="filter-set"></a>
<h2>filter-set</h2>

<p>Enable/disable global filter, equivalent to admin/filters.php settings page. First argument is a filter name without filter_ prefix.
Second argument is a state, use On = 1 , Off/but available per course = -1 , Off = -9999 .</p>

<p>Example 1: Disable multimedia filter completely.</p>

<pre><code>moosh filter-set mediaplugin -9999 
</code></pre>

<a name="form-add"></a>
<h2>form-add</h2>

<p>Adds an element to the form. If there is a form in your current working directory, that you have recently worked on with
moosh (e.g. you have generated it with moosh generate-form), moosh will inject the code into that file. If moosh is not
 able to figure out where you would like the code added, it will display it on the standard output.</p>

<pre><code>moosh form-add type name
</code></pre>

<p>Example 1: Display list of all available element templates.</p>

<pre><code>moosh form-add
</code></pre>

<p>Example 2: Add (or display) the code for advanced checkbox element for Moodle form.</p>

<pre><code>moosh form-add advcheckbox checkboxid
</code></pre>

<a name="forum-newdiscussion"></a>
<h2>forum-newdiscussion</h2>

<p>Adds a new discussion to an existing forum. You should provide a course id, a forum id
and an user id in this order. If no name or message is specified it defaults to the data
generator one.</p>

<p>Example:</p>

<pre><code>moosh forum-newdiscussion 3 7 2
moosh forum-newdiscussion --subject "Forum Name" --message "I am a long text" 3 7 2
</code></pre>

<a name="generate-availability"></a>
<h2>generate-availability</h2>

<p>Generate a code for new availability condition based on danielneis/moodle-availability_newavailability.</p>

<pre><code>moosh generate-availability newcondition
</code></pre>

<a name="generate-block"></a>
<h2>generate-block</h2>

<p>Generate a code for new block based on the template.</p>

<p>Example: generate new block_abc</p>

<pre><code>moosh generate-block abc
</code></pre>

<a name="generate-cfg"></a>
<h2>generate-cfg</h2>

<p>Generate fake class to get auto-completion for $CFG object. Properties genertated extracted from the current source code.
 See <a href="http://moosh-online.com/#cfg-auto-completion">setup instructions</a>.</p>

<pre><code>moosh generate-cfg &gt; config.class.php
</code></pre>

<a name="generate-enrol"></a>
<h2>generate-enrol</h2>

<p>Creates new local plugin under enrol/ based on template from https://github.com/danielneis/moodle-enrol_newenrol</p>

<pre><code>moosh generate-enrol name
</code></pre>

<p>Example 1: Generate new plugin under enrol/mynewenrol</p>

<pre><code>moosh generate-local mynewenrol
</code></pre>

<a name="generate-filemanager"></a>
<h2>generate-filemanager</h2>

<p>Shows how to code filepicker, based on https://github.com/AndyNormore/filemanager. Takes no arguments.</p>

<pre><code>moosh generate-filemanager
</code></pre>

<a name="generate-files"></a>
<h2>generate-files</h2>

<p>This command creates new mod_resource in choosen course with a selected number of files and their size.</p>

<p>moosh generate-files [-n, --name] [-s, --section] (courseid) (filescount) (filesize)</p>

<p>Example of total sizes:
- 1KB (1 file x 1024 Bytes),
- 1MB (64 files x 16384 Bytes),
- 10MB (128 files x 81920 Bytes),
- 100MB (1024 files x 102400 Bytes),
- 1GB (16384 files x 65536 Bytes)
- 2GB (32768 files x 65536 Bytes)</p>

<p>Example 1: Add 1 file that weighs 1MB into course with id = 4</p>

<pre><code>moosh generate-files 4 1 1048576
</code></pre>

<p>Example 2: Add 1000 files (1KB each) into course with id=4, the file should be named 'Test' and placed in section number 3</p>

<pre><code>moosh generate-files -n 'Test' -s 3 4 1000 1024
</code></pre>

<a name="generate-form"></a>
<h2>generate-form</h2>

<p>Creates a new file with the form class code. Will display on the screen a boilerplate code to use the form. If the form
file already exists, both form &amp; form usage code will only be displayed on the standard output.
moosh will try to figure out what plugin are you currently working on, based on your current working directory, and prefix
the form accordingly.</p>

<pre><code>moosh generate-form form_name
</code></pre>

<p>Example: Assuming you are in mod/flashcard directory, the command will create edit_form.php containing mod_flashcard_edit_form
class. It will also display a boilerplate code on how can you use the form.</p>

<pre><code>moosh generate-form edit
</code></pre>

<a name="generate-gradereport"></a>
<h2>generate-gradereport</h2>

<p>Creates new grade report under grade/report based on the template from https://github.com/danielneis/moodle-gradereport_newgradereport.</p>

<pre><code>moosh generate-gradereport report_name
</code></pre>

<p>Example: Create new report under grade/report/beststudents</p>

<pre><code>moosh generate-gradereport beststudents
</code></pre>

<a name="generate-gradeexport"></a>
<h2>generate-gradeexport</h2>

<p>Creates new grade export under grade/export based on the template from https://github.com/danielneis/moodle-gradeexport_newgradeexport.</p>

<pre><code>moosh generate-gradeexport export_name
</code></pre>

<p>Example: Create new export under grade/export/mycustomsystem</p>

<pre><code>moosh generate-gradeexport mycustomsystem
</code></pre>

<a name="generate-lang"></a>
<h2>generate-lang</h2>

<p>Scan files given as arguments or currently remembered file, extract language strings and add them to the lang file if
necessary.</p>

<pre><code>moosh generate-lang [file1] [file2] [file3]...
</code></pre>

<p>Example 1: Extract lang strings from edit_form.php.</p>

<pre><code>moosh generate-lang edit_form.php
</code></pre>

<a name="generate-local"></a>
<h2>generate-local</h2>

<p>Creates new local plugin under local/ based on template from https://github.com/danielneis/moodle-local_newlocal</p>

<pre><code>moosh generate-local name
</code></pre>

<p>Example 1: Generate new plugin under local/mynewlocal</p>

<pre><code>moosh generate-local mynewlocal
</code></pre>

<a name="generate-messageoutput"></a>
<h2>generate-messageoutput</h2>

<p>Creates new message output processor under message/output based on the template from https://github.com/danielneis/moodle-message_newprocessor.</p>

<pre><code>moosh generate-messageoutput processor_name
</code></pre>

<p>Example: Create new message output processor under message/output/flashcard</p>

<pre><code>moosh generate-messageoutput flashcard
</code></pre>

<a name="generate-module"></a>
<h2>generate-module</h2>

<p>Creates new module based on the NEWMODULE template from Moodle HQ.</p>

<pre><code>moosh generate-module module_name
</code></pre>

<p>Example: Create new module under mod/flashcard</p>

<pre><code>moosh generate-module flashcard
</code></pre>

<a name="generate-moosh"></a>
<h2>generate-moosh</h2>

<p>Use moosh to create new moosh command.</p>

<pre><code>moosh generate-moosh category-command
</code></pre>

<a name="generate-qtype"></a>
<h2>generate-qtype</h2>

<p>Creates new question type based on the NEWMODULE template from https://github.com/jamiepratt/moodle-qtype_TEMPLATE.</p>

<pre><code>moosh generate-qtype qtype_name
</code></pre>

<p>Example: Create new module under question/type/myqtype</p>

<pre><code>moosh generate-qtype myqtype
</code></pre>

<a name="generate-userprofilefield"></a>
<h2>generate-userprofilefield</h2>

<p>Creates new profile field based on a template.</p>

<pre><code>moosh generate-userprofilefield newfield
</code></pre>

<a name="generate-ws"></a>
<h2>generate-ws</h2>

<p>Creates new local plugin for WS development based on moodlehq/moodle-local_wstemplate.</p>

<pre><code>moosh generate-ws newws
</code></pre>

<a name="gradebook-import"></a>
<h2>gradebook-import</h2>

<p>Imports gradebook grades from csv file into a course given by id. With --course-idnumber use take mdl_course.idnumber instead of course.id.
--map-users-by will change what to use for mapping users from CSV (email or idnumber).</p>

<p>Use --test for testing the import first.</p>

<p>Example:</p>

<pre><code>moosh gradebook-import --test gradebook.csv course_id
</code></pre>

<p>Possible column headers to us:</p>

<ul>
<li>"ID number" user's ID number (idnumber)</li>
<li>"email" user's email</li>
<li>one or more columns matching grade item name</li>
</ul>


<a name="gradecategory-create"></a>
<h2>gradecategory-create</h2>

<p>Creates grade category.</p>

<p>Example:</p>

<pre><code>moosh gradecategory-create -n category-name -a aggregation parent_id course_id
</code></pre>

<a name="gradecategory-list"></a>
<h2>gradecategory-list</h2>

<p>Lists grade categories, with command-line options, arguments modeled on course-list's.</p>

<p>Example:</p>

<pre><code>moosh gradecategory-list --hidden=yes --empty=yes --fields=id,parent,fullname courseid=26
</code></pre>

<a name="gradeitem-create"></a>
<h2>gradeitem-create</h2>

<p>Creates grade items, with command-line options and courseid, gradecategoryid arguments.</p>

<p>Example:</p>

<pre><code>moosh gradeitem-create --itemname=Boost --grademax=3 --calculation='=max(3, ##gi5075##)' -o '--aggregationcoef=1' 37 527
</code></pre>

<a name="gradeitem-list"></a>
<h2>gradeitem-list</h2>

<p>Lists grade items, with command-line options, arguments modeled on course-list's.</p>

<p>Example:</p>

<pre><code>moosh gradeitem-list --hidden=yes --locked=no --empty=yes --fields=id,categoryid,itemname courseid=26
</code></pre>

<a name="gradebook-export"></a>
<h2>gradebook-export</h2>

<p>Exports gradebook grades for grade item(s) (comma-separated if more than 1) in specified course.</p>

<p>Example:</p>

<pre><code>moosh gradebook-export -g 0 -x 1 -a 1 -d 2 -p 0 -s comma -f txt 4755,4756 40 &gt; grades.csv
</code></pre>

<p>Options and defaults:</p>

<ul>
<li>'group id': 0</li>
<li>'exportfeedback': 0</li>
<li>'onlyactive': 1</li>
<li>'displaytype (real=1, percentage=2, letter=3)': 1</li>
<li>'decimalpoints': 2</li>
<li>'separator (tab, comma)': comma</li>
<li>'export format: (ods, txt, xls, xml)': txt</li>
</ul>


<a name="group-create"></a>
<h2>group-create</h2>

<p>Create a new group.</p>

<p>Example 1:</p>

<pre><code>moosh group-create --description "group description" --key sesame --id "group idnumber" groupname courseid
</code></pre>

<a name="group-list"></a>
<h2>group-list</h2>

<p>Lists groups in course, or grouping.</p>

<p>Example 1:</p>

<pre><code>moosh group-list courseid ...
</code></pre>

<p>Example 2:</p>

<pre><code>moosh group-list --id -G groupingid courseid
</code></pre>

<a name="group-memberadd"></a>
<h2>group-memberadd</h2>

<p>Add member to a specified group. It may be done using member username or id. If course id is specified, addition
is based on username(s), otherwise on user id(s).</p>

<p>Available options:</p>

<table>
<thead>
<tr>
<th> Option       </th>
<th> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td> -g, --group  </td>
<td> Group id.   </td>
</tr>
<tr>
<td> -c, --course </td>
<td> Course id.  </td>
</tr>
</tbody>
</table>


<p>Command syntax (by user id):</p>

<pre><code>moosh group-memberadd -g groupid memberid1 [memberid2] ...
</code></pre>

<p>Command syntax (by user username)</p>

<pre><code>moosh group-memberadd -g groupid memberid1 [memberid2] ...    
</code></pre>

<p>Example 1: Add user with id 111 to the group with id 333.</p>

<pre><code>moosh group-memberadd -g 333 111
</code></pre>

<p>Example 2: Add users with ids 1, 2 and 3 to the group with id 333</p>

<pre><code>moosh group-memberadd -g 333 1 2 3
</code></pre>

<p>Example 3: Add user with username <code>example_username</code> enrolled in course with id 5 to the group with id 1</p>

<pre><code>moosh group-memberadd -g 1 -c 5 example_username
</code></pre>

<p>Example 4: Add users with usernames <code>example_username1</code>, <code>example_username2</code> enrolled in course with id 5
to the group with id 1</p>

<pre><code>moosh group-memberadd -g 1 -c 5 example_username1, example_username2
</code></pre>

<a name="grouping-create"></a>
<h2>grouping-create</h2>

<p>Create a new grouping.</p>

<p>Example:</p>

<pre><code>moosh grouping-create --description "grouping description" --id "grouping idnumber" groupingname courseid
</code></pre>

<a name="group-assigngrouping"></a>
<h2>group-assigngrouping</h2>

<p>Add a group to a grouping.</p>

<p>Example:</p>

<pre><code>moosh group-assigngrouping -G groupingid groupid1 [groupid2] ...
</code></pre>

<a name="h5p-core-contenttypes-export"></a>
<h2>h5p-core-contenttypes-export</h2>

<p>Exports libraries from H5p core to file in csv format. Be aware that H5p Core libraries are stored separately
from H5p Plugin libraries.</p>

<p>Available options:</p>

<table>
<thead>
<tr>
<th> Option     </th>
<th> Description               </th>
</tr>
</thead>
<tbody>
<tr>
<td> -n, --name </td>
<td> Defines target file name. </td>
</tr>
</tbody>
</table>


<p>Example 1: Export content types</p>

<pre><code>moosh h5p-core-contenttypes-export
</code></pre>

<p>Example 2: Export content types with custom filename "my-custom-file.csv"</p>

<pre><code>moosh h5p-core-contenttypes-export -n my-custom-file
</code></pre>

<p>Example 3: Export content types to txt file (using csv format)</p>

<pre><code>moosh h5p-core-contenttypes-export -n my-custom-txt-file.txt 
</code></pre>

<a name="h5p-core-libraries-export"></a>
<h2>h5p-core-libraries-export</h2>

<p>Exports content types from H5p core to file in csv format. Be aware that H5p Core libraries are stored separately
from H5p Plugin libraries.</p>

<p>Available options:</p>

<table>
<thead>
<tr>
<th> Option     </th>
<th> Description               </th>
</tr>
</thead>
<tbody>
<tr>
<td> -n, --name </td>
<td> Defines target file name. </td>
</tr>
</tbody>
</table>


<p>Example 1: Export libraries</p>

<pre><code>moosh h5p-core-libraries-export
</code></pre>

<p>Example 2: Export libraries with custom filename "my-custom-file.csv"</p>

<pre><code>moosh h5p-core-libraries-export -n my-custom-file
</code></pre>

<p>Example 3: Export content types to txt file (using csv format)</p>

<pre><code>moosh h5p-core-libraries-export -n my-custom-txt-file.txt 
</code></pre>

<a name="h5p-plugin-libraries-export"></a>
<h2>h5p-plugin-libraries-export</h2>

<p>Exports libraries from H5p plugin to file in csv format. In fact H5p content types
are just libraries that are marked as runnable. Be aware that H5p Plugin libraries are stored separately
from H5p Core libraries.</p>

<p>Available options:</p>

<table>
<thead>
<tr>
<th> Option     </th>
<th> Description               </th>
</tr>
</thead>
<tbody>
<tr>
<td> -n, --name </td>
<td> Defines target file name. </td>
</tr>
</tbody>
</table>


<p>Example 1: Export libraries types</p>

<pre><code>moosh h5p-plugin-libraries-export
</code></pre>

<p>Example 2: Export libraries with custom filename "my-custom-file.csv"</p>

<pre><code>moosh h5p-plugin-libraries-export -n my-custom-file
</code></pre>

<p>Example 3: Export libraries to txt file (using csv format)</p>

<pre><code>moosh h5p-plugin-libraries-export -n my-custom-txt-file.txt 
</code></pre>

<a name="h5p-plugin-contenttypes-export"></a>
<h2>h5p-plugin-contenttypes-export</h2>

<p>Exports content types from H5p plugin to file in csv format. In fact H5p content types
are just libraries that are marked as runnable. Be aware that H5p Plugin libraries are stored separately
from H5p Core libraries.</p>

<p>Available options:</p>

<table>
<thead>
<tr>
<th> Option     </th>
<th> Description               </th>
</tr>
</thead>
<tbody>
<tr>
<td> -n, --name </td>
<td> Defines target file name. </td>
</tr>
</tbody>
</table>


<p>Example 1: Export content types types</p>

<pre><code>moosh h5p-plugin-contenttypes-export
</code></pre>

<p>Example 2: Export content types with custom filename "my-custom-file.csv"</p>

<pre><code>moosh h5p-plugin-contenttypes-export -n my-custom-file
</code></pre>

<p>Example 3: Export content types to txt file (using csv format)</p>

<pre><code>moosh h5p-plugin-contenttypes-export -n my-custom-txt-file.txt 
</code></pre>

<a name="info"></a>
<h2>info</h2>

<p>Show information about plugin in current directory.</p>

<p>Example 1:</p>

<pre><code>moosh info
</code></pre>

<a name="info-context"></a>
<h2>info-context</h2>

<p>Show information about given context ID - as in mdl_context.id.</p>

<p>Example 1: Show information about Moodle context 123.</p>

<pre><code>moosh info-context 123
</code></pre>

<a name="info-plugins"></a>
<h2>info-plugins</h2>

<p>List all possible plugins in this version of Moodle and directory for each.</p>

<p>Example 1: Show all plugin types.</p>

<pre><code>moosh info-plugins
</code></pre>

<a name="lang-compare"></a>
<h2>lang-compare</h2>

<p>Compare 2 Moodle language files and lists the difference in strings (keys) between them.
It does not compare the translations (values).</p>

<p>Example:</p>

<pre><code>moosh lang-compare book.php book2.php
</code></pre>

<p>Result:</p>

<pre><code>Comparing book.php and book2.php. Summary:
Number of strings in book.php: 72
Number of strings in book2.php: 72
Number of strings missing in book2.php: 1
Number of strings missing in book.php: 1

List of language strings that exist in book.php but are not present in book2.php
pluginname

List of language strings that exist in book2.php but are not present in book.php
pluginname2
</code></pre>

<a name="language-install"></a>
<h2>language-install</h2>

<p>Install language pack.</p>

<p>Example: Install French language pack.</p>

<pre><code>moosh language-install fr
</code></pre>

<a name="languages-update"></a>
<h2>languages-update</h2>

<p>Update all installed language packs, in the current Moodle folder.</p>

<p>Example 1: Update all language packs.</p>

<pre><code>moosh languages-update
</code></pre>

<a name="maintenance-off"></a>
<h2>maintenance-off</h2>

<p>Disable maintenance mode.</p>

<pre><code>moosh maintenance-off
</code></pre>

<a name="maintenance-on"></a>
<h2>maintenance-on</h2>

<p>Enable maintenance mode.</p>

<pre><code>moosh maintenance-on
</code></pre>

<p>A maintenance message can also be set:</p>

<pre><code>moosh maintenace-on -m "Example message"
</code></pre>

<a name="module-config"></a>
<h2>module-config</h2>

<p>Set or Get any plugin's settings values</p>

<p>Example:</p>

<pre><code>moosh module-config set dropbox dropbox_secret 123
moosh module-config get dropbox dropbox_secret ?
</code></pre>

<a name="module-config"></a>
<h2>module-config</h2>

<p>Copy a module from one course to another.</p>

<p>Example 1: Copy module id 27 to course id 34.</p>

<pre><code>moosh module-copy 27 34
</code></pre>

<p>Example 2: Copy module id 27 to course id 34 and name the new module "Assignment 1".</p>

<pre><code>moosh module-copy --name "Assignment 1" 27 34
</code></pre>

<p>Example 3: Copy module id 27 to course id 34 and name the new module "Assignment 1",
placing it in section 2.</p>

<pre><code>moosh module-copy --name "Assignment 1" --section 2 27 34
</code></pre>

<a name="module-manage"></a>
<h2>module-manage</h2>

<p>Show or Hide moudles, system wide (Will also delete, in the future)</p>

<p>Example:</p>

<pre><code>moosh module-manage hide scorm
moosh module-manage show scorm
</code></pre>

<a name="module-reinstall"></a>
<h2>module-reinstall</h2>

<p>Re-install any Moodle plugin. It will remove all the data related to the module and install it from clean.</p>

<p>Example:</p>

<pre><code>moosh module-reinstall block_html
moosh module-reinstall mod_book
</code></pre>

<a name="nagios-check"></a>
<h2>nagios-check</h2>

<p>Create session login and login to a site using curl. Return error in Nagios format if login was not successful.</p>

<pre><code>moosh nagios-check
</code></pre>

<a name="php-eval"></a>
<h2>php-eval</h2>

<p>Evaluate arbitrary php code after bootstrapping Moodle.</p>

<p>Example:</p>

<pre><code>moosh php-eval 'var_dump(get_object_vars($CFG))'
</code></pre>

<a name="plugin-hideshow"></a>
<h2>plugin-hideshow</h2>

<p>Hide or show a plugin in all site context</p>

<p>Requires plugin type, plugin name and show option.</p>

<p>Show option is 0 if hide and 1 if show.</p>

<p>This will work for the following plugin types:</p>

<p>block, mod, assignfeedback, assignsubmission, qtype, qbehaviour, enrol, filter, editor, auth, license, repository, courseformat or avaibility</p>

<p>Example 1 : Hide chat module plugin for entire site</p>

<pre><code>moosh plugin-hideshow mod chat 0
</code></pre>

<a name="plugin-download"></a>
<h2>plugin-download</h2>

<p>Download plugin for a given Moodle version to current directory.
Requires plugin short name, and optional Moodle version.
You can obtain avalible plugins names by using `plugin-list -n' command.
You may specify proxy server with command line option or define ENV variable http_proxy.</p>

<p>Example 1: Download block_fastnav for moodle 3.9 into ./block_fastnav.zip</p>

<pre><code>moosh plugin-download -v 3.9 block_fastnav
</code></pre>

<p>Example 2: Only show link for block_fastnav moodle current version</p>

<pre><code>moosh plugin-download -u block_fastnav
</code></pre>

<p>Output:</p>

<pre><code>https://moodle.org/plugins/download.php/23108/block_fastnav_moodle310_2020120800.zip
</code></pre>

<a name="plugin-install"></a>
<h2>plugin-install</h2>

<p>Download and install plugin. Requires plugin short name, and optional version. You can obtain those data by using `plugin-list -v' command.
You may specify proxy server with command line option or define ENV variable http_proxy.</p>

<p>Example 1: install a specific version</p>

<pre><code>moosh plugin-install --release 20160101 mod_quickmail
</code></pre>

<p>Example 2: install the latest release supported by current Moodle version.</p>

<pre><code>moosh plugin-install block_checklist
</code></pre>

<a name="plugin-list"></a>
<h2>plugin-list</h2>

<p>List Moodle plugins filtered on given query. Returns plugin full name, short name, available Moodle versions and short description.
You may specify proxy server with command line option or define ENV variable http_proxy.</p>

<p>Example 1: list all plugins available on https://moodle.org/plugins</p>

<pre><code>moosh plugin-list
</code></pre>

<p>Example 2: download all modules available for version 2.8 or later</p>

<pre><code>moosh plugin-list  | grep '^mod_' | grep 2.8 | grep -o '[^,]*$' | wget -i -
</code></pre>

<a name="plugins-usage"></a>
<h2>plugins-usage</h2>

<p>Shows the usage of the subset of the plugins used in Moodle installation.
Plugin will show the usages, wherever it can figure out if the plugin is used.
Currently supported plugins are: filters, question types, course formats, enrolments,
blocks, authentication types, activities.</p>

<p>Example 1: show all plugins and their usage</p>

<pre><code>moosh plugins-usage 
</code></pre>

<p>Example 2: show only contrubuted (3-rd party) plugins</p>

<pre><code>moosh plugins-usage -c 1
</code></pre>

<a name="plugin-uninstall"></a>
<h2>plugin-uninstall</h2>

<p>Removes given plugin from the DB and disk. It can remove plugins that have no folder on the disk and have some redundant data inside DB tables.
If you do not have write permissions on the plugins' folder it will advice you with the command that will give the right permissions and then you are asked to run the command again.</p>

<p>Example:</p>

<pre><code>moosh plugin-uninstall theme_elegance
</code></pre>

<a name="question-export"></a>
<h2>question-export</h2>

<p>Exports all or selected questions.</p>

<p>Parameters</p>

<table>
<thead>
<tr>
<th> Option          </th>
<th> Description                                         </th>
</tr>
</thead>
<tbody>
<tr>
<td> -C, --category  </td>
<td> Questions category id.                              </td>
</tr>
<tr>
<td> -c, --course    </td>
<td> Questions course id.                                </td>
</tr>
<tr>
<td> -f, --filename  </td>
<td> Exported file name or path without extension.       </td>
</tr>
<tr>
<td> -r, --recursive </td>
<td> Use only with -C. Exports also children categories. </td>
</tr>
</tbody>
</table>


<p>Example: export all questions</p>

<pre><code>moosh question-export
</code></pre>

<p>Example: export questions with category with id 3 to file my-questions.json</p>

<pre><code>moosh question-export -C 3 -f my-questions
</code></pre>

<p>Example: export questions with category with id 3 and all its child categories to file my-questions.json</p>

<pre><code>moosh question-export -C 3 -f my-questions -r
</code></pre>

<a name="question-import"></a>
<h2>question-import</h2>

<p>Import quiz question from xml file into selected quiz.</p>

<p>Example: import question from file path/to/question.xml to quiz with id 2</p>

<pre><code>moosh question-import path/to/question.xml 2
</code></pre>

<a name="questionbank-import"></a>
<h2>questionbank-import</h2>

<p>Import questions in XML or GIFT format into question bank.</p>

<p>Example: import questions from file path/to/question.xml to question bank category id 10</p>

<pre><code>moosh questionbank-import path/to/question.xml 10
</code></pre>

<a name="questioncategory-create"></a>
<h2>questioncategory-create</h2>

<p>Creates a 'name' question category in a parent category with
context. The --reuse option creates the category
if and only if there is not exactly one already in existence with the
same parent, context and name, returning the existing category id, otherwise.</p>

<p>Other options are idnumber and infoformat, which defaults to
FORMAT_MARKDOWN.</p>

<p>Example: create a question category, 'noclass' in parent category 6044, with
context 754 and info 'New Year'.</p>

<pre><code> moosh questioncategory-create --reuse -p 6044 -c 754 -d 'New Year' noclass
</code></pre>

<a name="quiz-delete-attempts"></a>
<h2>quiz-delete-attempts</h2>

<p>Deletes all quiz-attempts with given quiz id.</p>

<p>Example 1: delete all attempts from quiz id 2.</p>

<pre><code>moosh quiz-delete-attempts 2
</code></pre>

<p>Resuls:</p>

<pre><code>Deleted attempt: 15
Deleted attempt: 16
Deleted attempt: 17
Deleted attempt: 18
Deleted 4 questions
</code></pre>

<a name="random-label"></a>
<h2>random-label</h2>

<p>Add a label with random text to random section of course id provided.</p>

<p>Example 1: Add 5 labels to course id 17.</p>

<pre><code>for i in {1..5}; do moosh random-label 17; done
</code></pre>

<p>Example 2: Add label that will contain string " uniquetext " inside.</p>

<pre><code>moosh random-label -i ' uniquetext ' 17
</code></pre>

<a name="report-concurrency"></a>
<h2>report-concurrency</h2>

<p>Get information about concurrent users online.</p>

<p>Use: -f and -t with date in either YYYYMMDD or YYYY-MM-DD date. Add -p to specify period.</p>

<p>Example 1: Get concurrent users between 20-01-2014 and 27-01-2014 with 30 minut periods.</p>

<pre><code>moosh report-concurrency -f 20140120 -t 20140127 -p 30
</code></pre>

<p>Example 2: Create the report for the last week. Could be used in a cronjob.</p>

<pre><code>start=$(date --date="7 days ago" +"%Y-%m-%d");finish=$(date +"%Y-%m-%d");moosh report-concurrency --from $start --to $finish
</code></pre>

<a name="request-select"></a>
<h2>request-select</h2>

<p>Run any custom SQL Select against bootstrapped Moodle instance DB and return resultset with csv format with ; separator.</p>

<p>Requires a select query as argument.</p>

<p>Usefull to create a csv file to import datas in moodle</p>

<p>Usefull also to retrieve an value to reuse it later in a script composed of moosh commands</p>

<p>Example 1: Select username, firstname, lastname and email</p>

<pre><code>moosh request-select "select username,firstname,lastname, email from {user}"
</code></pre>

<p>Output:</p>

<pre><code>egrieg;Edward,Grieg,egrieg@example.com

hpurcell;Henry;Purcell,hpurcell@example.com
</code></pre>

<a name="restore-settings"></a>
<h2>restore-settings</h2>

<p>Returns all possible restore settings for the current Moodle. To figure them out,
the command creates and then backes up an empty course with short name "moosh001" - unless it already exists.</p>

<p>Example 1: Dump all possible restore settings</p>

<pre><code>moosh restore-settings
</code></pre>

<a name="role-create"></a>
<h2>role-create</h2>

<p>Create new role, optionally provide description, archetype, context and name. Role id is returned.</p>

<p>Example 1: Create role with short name "newstudentrole" a description, name an archetype</p>

<pre><code>moosh role-create -d "Role description" -a student -n "Role name" newstudentrole
</code></pre>

<p>Example 2: Create role with short name "newrole" a description, context level</p>

<pre><code>moosh role-create -d "Description" -c system,user,block newrole
</code></pre>

<p>This command will create a role named "newrole" with system,user and block contextlevels checked.
Note: If neither an archetype nor the context level is defined, system context would be checked by default.</p>

<a name="role-delete"></a>
<h2>role-delete</h2>

<p>Delete role by ID or shortname.</p>

<p>Example 1: Delete role "newstudentrole"</p>

<pre><code>moosh role-delete newstudentrole
</code></pre>

<p>Example 2: Delete role id 10.</p>

<pre><code>moosh role-delete -i 10
</code></pre>

<a name="role-export"></a>
<h2>role-export</h2>

<p>Export role data, including permissions, role overrides, allow view settings and other related data.</p>

<p>Example 1: Export specific role data to a an output XML file.</p>

<pre><code>moosh role-export -f target_file.xml ROLENAME
</code></pre>

<p>Example 2: Export specific role data, generate output XML export and print to stdout.</p>

<pre><code>moosh role-export ROLENAME
</code></pre>

<p>Example 3: Format XML with whitespaces (pretty format) and output XML contents to stdout.</p>

<pre><code>moosh role-export --pretty ROLENAME
</code></pre>

<a name="role-import"></a>
<h2>role-import</h2>

<p>Import role data from an XML file that was produced either by role-export command or Moodle permissions UI.</p>

<p>Example 1: Import role from a specific XML file.</p>

<pre><code>moosh role-import -f source_file.xml
</code></pre>

<p>Example 2: Import role by reading XML data from STDIN.</p>

<pre><code>moosh role-import --stdin &lt; source_file.xml
</code></pre>

<p>You can either load XML data from a file or from STDIN.
If XML defines an existing rolename then this command will sync changes to an existing role.
If role does not exist and archetype is defined this command will create a new role with archetype defaults and xml permissions.
If neither role nor archetype exist the new role will be created with INHERITED permissions defaults.</p>

<a name="role-list"></a>
<h2>role-list</h2>

<p>Get list of roles</p>

<p>Example 1: Get roles with id, shortname and name.</p>

<pre><code>moosh role-list
</code></pre>

<p>Result:</p>

<pre><code>|   ID |Shortname                      |Name                           |
|    1 |manager                        | Manager                       |
|    2 |coursecreator                  | Course creator                |
|    3 |editingteacher                 | Teacher                       |
|    4 |teacher                        | Non-editing teacher           |
|    5 |student                        | Student                       |
|    6 |guest                          | Guest                         |
|    7 |user                           | Authenticated user            |
|    8 |frontpage                      |                               |
</code></pre>

<a name="role-reset"></a>
<h2>role-reset</h2>

<p>Reset give role's permissions from the file.</p>

<pre><code>moosh role-reset 1 definition_file.txt
</code></pre>

<a name="role-update-capability"></a>
<h2>role-update-capability</h2>

<p>Update role capabilities on any context.</p>

<p>Use: -i "roleid" or "role_short_name" with "role capability" and "capability setting" (inherit|allow|prevent|prohibit)
and finally, "contextid" (where 1 is system wide)</p>

<p>Example 1: update "student" role (roleid=5) "mod/forumng:grade" capability, system wide (contextid=1)</p>

<pre><code>moosh role-update-capability student mod/forumng:grade allow 1
</code></pre>

<p>Example 2: update "editingteacher" role (roleid=3) "mod/forumng:grade" capability, system wide (contextid=1)</p>

<pre><code>moosh role-update-capability -i 3 mod/forumng:grade prevent 1
</code></pre>

<a name="role-update-contextlevel"></a>
<h2>role-update-contextlevel</h2>

<p>Update the context level upon a role can be updated.</p>

<p>Use: "short role name" or -i "roleid" with relevant context level (system|user|category|course|activity|block)
and add "-on" or "-off" to the caontext level name to turn it on or off.</p>

<p>Example 1: Allow "student" role to be set on block level</p>

<pre><code>moosh role-update-contextlevel student -block-on
</code></pre>

<p>Example 2: Prevent "manager" role to be set on course level</p>

<pre><code>moosh role-update-contextlevel manager -course-off
</code></pre>

<a name="section-config-set"></a>
<h2>section-config-set</h2>

<p>Follows the course-config-set pattern, updating a field in the Moodle {course_sections} table, for all the course sections (or optionally a single section), in all the courses in a course category, or alternatively in one course.</p>

<p>Example 1: set the name of the second section in course with id 45 to "Describe a picture"</p>

<pre><code>moosh section-config-set -s 2 course 45 name "Describe a picture"
</code></pre>

<p>Example 2: set summaryformat to markdown in all sections in courses in the Miscellaneous category</p>

<pre><code>moosh section-config-set category 1 summaryformat 4
</code></pre>

<p>Example 3: Hide all sections in course with id 45</p>

<pre><code>moosh section-config-set course 45 visible 0
</code></pre>

<a name="sql-cli"></a>
<h2>sql-cli</h2>

<p>Open a connection to the Moodle DB using credentials in config.php. Currently supports PostgreSQL, Cockroachdb, and MySQL.</p>

<p>Example:</p>

<pre><code>moosh sql-cli
</code></pre>

<a name="sql-dump"></a>
<h2>sql-dump</h2>

<p>Dump Moodle DB to sql file. Works for PostgreSQL, Cockroachdb, and MySQL.</p>

<p>Example 1: dump database to backup.sql file</p>

<pre><code>moosh sql-dump &gt; backup.sql
</code></pre>

<a name="sql-run"></a>
<h2>sql-run</h2>

<p>Run any custom SQL against bootstrapped Moodle instance DB. If query start with SELECT then matched rows will be displayed.</p>

<p>Example 1: Set the country of all the users to Poland</p>

<pre><code>moosh sql-run "update {user} set country='PL'"
</code></pre>

<p>Example 2: Count the number of rows is log table</p>

<pre><code>moosh sql-run "select count(*) from {log}"
</code></pre>

<a name="task-lock-check"></a>
<h2>task-lock-check</h2>

<p>Show locked tasks. The command only works with MySQL.</p>

<p>Example 1: show list of locked tasks (if any)</p>

<pre><code>moosh task-lock-check
</code></pre>

<p>Example 2: show all tasks and their status (locked/unlocked)</p>

<pre><code>moosh task-lock-check -a
</code></pre>

<a name="task-schedule"></a>
<h2>task-schedule</h2>

<p>Schedule Moodle task</p>

<p>Requires task name with namespace</p>

<p>Options:
* -M, --minute :minute
* -H, --hour : hour
* -d, --day : day
* -m, --month : month
* -w, --dayofweek : Day of week
* -x, --disabled : Disabled
* -r, --resettodefaults : Reset to defaults</p>

<p>Example 1 : Schedule cleanup_task to launch every day at 01:01</p>

<pre><code>moosh -d=* -H=1 -m=1 "\tool_messageinbound\task\cleanup_task"
</code></pre>

<a name="theme-info"></a>
<h2>theme-info</h2>

<p>Show what themes are really used on Moodle site.</p>

<p>Example:</p>

<pre><code>moosh theme-info
</code></pre>

<a name="theme-settings-export"></a>
<h2>theme-settings-export</h2>

<p>Export theme settings (including uploaded files) as a tar.gz for use with <code>theme-settings-import</code>.</p>

<p>Example 1: run within a theme directory and it will know which theme you want</p>

<pre><code>moosh theme-settings-export
</code></pre>

<p>Example 2: run it anywhere within the Moodle dir if you specify the theme name</p>

<pre><code>moosh theme-settings-export --themename boost
</code></pre>

<a name="theme-settings-import"></a>
<h2>theme-settings-import</h2>

<p>Import settings from file created with <code>theme-settings-export</code>.</p>

<p>Example 1: give the name of the exported file</p>

<pre><code>moosh theme-settings-import boost_settings_1558197087.tar.gz
</code></pre>

<p>Example 2: specify a target theme name if you want to transfer settings to a different (but compatible) theme</p>

<pre><code>moosh theme-settings-import --targettheme boostfork boost_settings_1558197087.tar.gz
</code></pre>

<a name="top"></a>
<h2>top</h2>

<p>Display the latest entries from the log table mdl_logstore_standard_log.
If combined with "watch" command, it will imitate the poor man's "top" utility.</p>

<p>Example:</p>

<pre><code>watch moosh top
</code></pre>

<a name="user-online"></a>
<h2>user-online</h2>

<p>Display currently online users in a simple table. In a contrast to TOP command this command uses Fetcher API and queries user table instead of standard log store.
Available options:</p>

<table>
<thead>
<tr>
<th> Option           </th>
<th> Description                                                   </th>
</tr>
</thead>
<tbody>
<tr>
<td> -t, --time       </td>
<td> Show users online in last N seconds. Default 15 sec.          </td>
</tr>
<tr>
<td> -l, --limit      </td>
<td> Show maximum number of users. If empty all users are fetched. </td>
</tr>
<tr>
<td> -e, --hideheader </td>
<td> Print header with table column names.                         </td>
</tr>
</tbody>
</table>


<p>Use linux "watch" command to refresh screen periodically.</p>

<p>Example: Show online users in last 5 minutes and refresh list every 5 seconds.</p>

<pre><code>watch moosh user-online -t 300
</code></pre>

<a name="user-assign-system-role"></a>
<h2>user-assign-system-role</h2>

<p>Assign system role to user.</p>

<p>Example 1: assign "manager" role for "testuser"</p>

<pre><code>moosh user-assign-system-role testuser manager
</code></pre>

<p>Example 1: assign "coursecreator" role for "testuser2"</p>

<pre><code>moosh user-assign-system-role testuser2 coursecreator
</code></pre>

<a name="user-create"></a>
<h2>user-create</h2>

<p>Create a new Moodle user. Provide one or more arguments to create one or more users.</p>

<p>Example 1: create user "testuser" with the all default profile fields.</p>

<pre><code>moosh user-create testuser
</code></pre>

<p>Example 2: create user "testuser" with the all the optional values</p>

<pre><code>moosh user-create --password pass --email me@example.com --digest 2 --city Szczecin --country PL --institution "State University" --department "Technology" --firstname "first name" --lastname name testuser
</code></pre>

<p>Example 3: use bash/zsh expansion to create 10 users</p>

<pre><code>moosh user-create testuser{1..10}
</code></pre>

<p>The users will have unique email addresses based on the user name (testuser1, testuser2, testuser3...).</p>

<p>Example 4: create a user with LDAP authentication</p>

<pre><code>moosh user-create --auth ldap --password NONE  --email joe.blogs@domain.tld --city "Some City" --country IE --firstname "Joe" --lastname "Blogs" jblogs
</code></pre>

<a name="user-delete"></a>
<h2>user-delete</h2>

<p>Delete user(s) from Moodle. Provide one ore more usernames as arguments.</p>

<p>Example 1: delete user testuser</p>

<pre><code>moosh user-delete testuser
</code></pre>

<p>Example 2: delete user testuser1 and user testuser2</p>

<pre><code>moosh user-delete testuser1 testuser2
</code></pre>

<a name="user-export"></a>
<h2>user-export</h2>

<p>Exports user with given username to csv file.</p>

<p>Example 1:</p>

<pre><code>moosh user-export testuser
</code></pre>

<a name="user-getidbyname"></a>
<h2>user-getidbyname</h2>

<p>This command has been deprecated. Use user-list instead.</p>

<a name="user-import-pictures"></a>
<h2>user-import-pictures</h2>

<p>Provides capability of importing user pictures from a specific directory (recursively including subdirectories).
Image filename can be mapped to user ID, idnumber or username database field. Supported image types are jpg, gif and png.
--overwrite option flag can be used to force overwriting of existing user pictures.
To make this command compliant with RGPD, --policy option can be use to check policy acceptance by user before importing picture.</p>

<p>Example 1: import user pictures from directory and map file names to user's ID value.</p>

<pre><code>moosh user-import-pictures -i /path/to/import/dir
</code></pre>

<p>Example 2: import user pictures from directory and map file names to user's idnumber value.</p>

<pre><code>moosh user-import-pictures -n /path/to/import/dir
</code></pre>

<p>Example 3: import user pictures from directory and map file names to user's username value.</p>

<pre><code>moosh user-import-pictures -u /path/to/import/dir
</code></pre>

<p>Example 4: import user pictures from directory and map file names to user's username value. Before importing, check if user has accepted the policy with id 4.</p>

<pre><code>moosh user-import-pictures -u --policy 4 /path/to/import/dir
</code></pre>

<a name="user-list"></a>
<h2>user-list</h2>

<p>List user accounts. It accepts sql WHERE clause. If run without sql argument it will list first 100 users from database.</p>

<p>Example 1: list user accounts with id number higher than 10 and sort them by email</p>

<pre><code>moosh user-list --sort email "id &gt; 10"
</code></pre>

<p>Example 2: list users with first name bruce and username batman</p>

<pre><code>moosh user-list "name = 'bruce' AND username = 'batman'"
</code></pre>

<p>Example 3: list users enrolled in course id 2</p>

<pre><code>moosh user-list --course 2
</code></pre>

<p>Example 4: list teachers enrolled in course id 2 that never accessed that course</p>

<pre><code>moosh user-list --course 2 --course-role editingteacher --course-inactive
</code></pre>

<a name="user-login"></a>
<h2>user-login</h2>

<p>Logs given user in and return the session cookie.
This can then be used in another HTTP call to impersonate that user.
It is important that you run moosh as correct www user.
If you run it as another user than your web server, then the server may not be able
to read session file and you will see the error:</p>

<pre><code>error/An error occurred whilst communicating with the server 
</code></pre>

<p>Example: login as student1 and fetch his dashboard page.</p>

<pre><code>$ moosh user-login student1
MoodleSession:h6v2l11946ne16tejogs55vhcn
$ curl -b 'MoodleSession=h6v2l11946ne16tejogs55vhcn' http://localhost/vanilla37/my/index.php
</code></pre>

<a name="user-mod"></a>
<h2>user-mod</h2>

<p>Modify user(s) account.</p>

<p>Example 1: change admin's user password and email</p>

<pre><code>moosh user-mod --email my@email.com --password newpwd admin
</code></pre>

<p>Example 2: change authentication method for users with ids 17,20,22</p>

<pre><code>moosh user-mod -i --auth manual 17 20 22
</code></pre>

<p>Example 3: use bash/zsh expansion to change password for users with ID between 100 and 200</p>

<pre><code>moosh user-mod -i --password newpwd {100..200}
</code></pre>

<p>Example 4: update all users</p>

<pre><code>moosh user-mod --email my@email.com --password newpwd --auth manual --all
</code></pre>

<p>Example 5: set user as global super user</p>

<pre><code>moosh user-mod -g
</code></pre>

<p>Example 6: change admin's password while ignoring password's policy</p>

<pre><code>moosh user-mod --ignorepolicy --password weakpassword admin
</code></pre>

<a name="user-unassign-system-role"></a>
<h2>user-unassign-system-role</h2>

<p>Unassign system role to user.</p>

<p>Example 1: unassign "manager" role for "testuser"</p>

<pre><code>moosh user-unassign-system-role testuser manager
</code></pre>

<p>Example 2: unassign "coursecreator" role for "testuser2"</p>

<pre><code>moosh user-unassign-system-role testuser2 coursecreator
</code></pre>

<a name="userprofilefields-export"></a>
<h2>userprofilefields-export</h2>

<p>Export the definition of the defined user profile fields to CSV file
named by default "user_profile_fields.csv".</p>

<p>Example 1: export to "user_profile_fields.csv" in current directory</p>

<pre><code>moosh userprofilefields-export
</code></pre>

<p>Example 2: save CSV file as /tmp/fields.csv</p>

<pre><code>moosh userprofilefields-export -p /tmp/fields.csv
</code></pre>

<a name="userprofilefields-import"></a>
<h2>userprofilefields-import</h2>

<p>Import user profile fields defined in given CSV file.</p>

<p>Example: import user profie fields from user_profile_fields.csv</p>

<pre><code>moosh userprofilefields-import user_profile_fields.csv
</code></pre>

<a name="webservice-call"></a>
<h2>webservice-call</h2>

<p>Calls</p>

<p>Example: Get list of all courses enroled for a user</p>

<pre><code>moosh webservice-call --token 4ac42118db3ee8d4b1ae78f2c1232afd --params userid=3 core_enrol_get_users_courses
</code></pre>

<a name="webservice-install"></a>
<h2>webservice-install</h2>

<p>Install a Moodle Webservice</p>

<p>Requires service name and capabilities
* service name is the services["shortname'] defined in db/services.php file of a plugin
* Capabilities are separated by commas</p>

<p>Options:
* -m, --mail : mail, by default noreply user mail
* -u, --username : username
  * by default 'user<em><servicename> will be used
  * if not exists user is created
* -r, --rolename : role shortname
  * by default role</em><servicename> will used
  * if not exists role will be created
* i, --iprestriction : ip restriction
  * empty by default so all ip authorized
-v, --validuntil : valid until
  * empty so valid forever</p>

<p>Output:
* user user_servicename is created
* role role_servicename are created with definied capabilities
* user has role role_servicename on system
* webservice is instanciate with its function for user user_servicename
* token is genrated and output</p>

<p>Example 1 : Install a service named wsservicename with capabilities</p>

<p>   moosh webservice-install wsservicename 'plugintype/pluginname:capability1,plugintype/pluginname:capability2'</p>

          <!--</div>-->
        </div>

        <div class="col-sm-3">
          <div class="bs-sidebar hidden-print">
            <ul class="nav bs-sidenav accordion">
            <li></li>


                <h4 class="short-navbar-title">command index</h4>
                <ol class="short-navbar list-unstyled"></ol>
                <p>Moodle development book:</p>
                <a href="https://leanpub.com/moodle"><img class="img-responsive book above-index" src="/images/book.jpg" /></a>
            </ul>
          </div>
        </div>
      </div>

    <!--</div>-->
    </div><!-- /.container -->
    <hr>
<footer>
<div class="container">
    <p>&copy; <a href="https://github.com/tmuras">Tomasz Muras</a></p>
    </div>
</footer>
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>

  </body>
</html>


<script type="text/javascript">
    var strings = [];
    //$(".command-name").each(function() { strings.push($(this).text()) });
    $("a[name] + h2").each(function() { strings.push($(this).text()) });
    var per_group = 8;

    var grouped = [];

    for(var i=0; i<strings.length; i+=per_group) {
        var first, last;
        var max_in_group = Math.min(strings.length - 1, i + per_group - 1);
        //console.log(max_in_group);
        first = strings[i];
        if (strings[i+per_group-1]) {
          last = strings[i+per_group-1];
        }
        else {
          last = strings[strings.length-1];
        }

        console.log(last);
        $('.short-navbar').append('<li><a data-toggle="collapse" data-parent="#accordion" href="#' + first + '-' + last + '">' + first + ' - ' + last + '</a><ul id="' + first + '-' + last + '" class="panel-collapse collapse">');
        for(var j=i; j<=max_in_group; j++) {
            $('#' + first + '-' + last).append('<li><a href="#' + strings[j] + '"">' + strings[j] + '</li>');
        }
        $(".short-navbar").append('</ul></li>');
    }

</script>
